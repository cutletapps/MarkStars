(this.webpackJsonpmarkstars=this.webpackJsonpmarkstars||[]).push([[0],[,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg=="},,,,,,,function(e,t,n){e.exports=n(25)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(10),r=n.n(o),s=(n(20),n(21),n(2)),u=n(3),l=n(5),c=n(4),d=n(6),h=n(1),m=n(8),v=n.n(m),f=(n(22),i.Component,i.Component,n(11)),p=n.n(f),g=function(){function e(t){var n=t.fov,i=void 0===n?45:n,a=t.aspectRatio,o=void 0===a?window.innerHeight/window.innerWidth:a,r=t.near,u=void 0===r?.01:r,l=t.far,c=void 0===l?500:l,d=t.position,m=void 0===d?{x:0,y:0,z:0}:d;t.up;Object(s.a)(this,e),this.camera=new h.PerspectiveCamera(i,o,u,c),this.setPosition(m),this.setLookAt()}return Object(u.a)(e,[{key:"onWindowResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}},{key:"setUp",value:function(e,t,n){this.camera.up.set(e,t,n)}},{key:"setPosition",value:function(e){var t=e.x,n=void 0===t?this.camera.position.x:t,i=e.y,a=void 0===i?this.camera.position.y:i,o=e.z,r=void 0===o?this.camera.position.z:o;this.setX(n),this.setY(a),this.setZ(r)}},{key:"setX",value:function(e){this.camera.position.x=e}},{key:"setY",value:function(e){this.camera.position.y=e}},{key:"setZ",value:function(e){this.camera.position.z=e}},{key:"setLookAt",value:function(){this.camera.lookAt(new h.Vector3(0,0,0))}},{key:"update",value:function(){}},{key:"get",value:function(){return this.camera}}]),e}(),y=n(12),w=n(13),A=n.n(w),P={CIRCLE:"CIRCLE",SQUARE:"SQUARE"},S=function(){function e(t){var n=this,i=t.scene,a=t.numParticles,o=void 0===a?1e4:a,r=t.uniforms,u=void 0===r?{sizeMultipler:{value:window.innerHeight*window.devicePixelRatio/2},color:{value:new h.Color("rgb(0, 0, 0)")}}:r,l=t.blending,c=(void 0===l&&h.AdditiveBlending,t.transparent,t.depthTest,t.depthWrite,t.renderer),d=t.mouseRadius,m=void 0===d?.05:d,v=t.mousePush,f=void 0===v?2e-4:v,p=t.particleSize,g=void 0===p?.06:p,y=t.particleSizeInc,w=void 0===y?1e-4:y,A=t.particleShape,S=void 0===A?P.CIRCLE:A,C=t.xSpeed,x=void 0===C?3e-5:C,E=t.ySpeed,k=void 0===E?1e-4:E,z=t.yThreshold,b=void 0===z?.1:z;(Object(s.a)(this,e),this.scene=i,this.numParticles=o,this.renderer=c,this.uniforms=u,this.mouseRadius=m,this.mousePush=f,this.particleSize=g,this.particleSizeInc=w,this.particleShape=S,this.xSpeed=x,this.ySpeed=k,this.yThreshold=b,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.video=document.createElement("video"),navigator.getUserMedia)?navigator.getUserMedia({video:{width:1280,height:720}},(function(e){var t=n.video;t.srcObject=e,t.width=480,t.height=480,t.autoplay=!0,n.addParticles()}),(function(e){return console.error("video failed to load",e)})):document.getElementById("info").innerHTML="Requires use of webcam. Please use the latest version of Chrome."}return Object(u.a)(e,[{key:"updateParticleVars",value:function(){this.FBO.simulationShader.uniforms.mouseRadius.value=this.mouseRadius,this.FBO.simulationShader.uniforms.mousePush.value=this.mousePush,this.FBO.simulationShader.uniforms.yThreshold.value=this.yThreshold,this.material.uniforms.isCircle.value=this.particleShape===P.CIRCLE}},{key:"onDocumentMouseMove",value:function(e){this.mouseX=this.windowHalfX-e.clientX,this.mouseY=e.clientY-this.windowHalfY,this.FBO.simulationShader.uniforms.mouse.value.set(.5*this.mouseX/this.windowHalfX,-.5*this.mouseY/this.windowHalfY,0)}},{key:"addParticles",value:function(){for(var e=this.video,t=this.renderer,n=e.width/e.height,i=n>1?n:1,a=n>1?1:e.height/e.width,o=i,r=a;o*r<2e4-i*a;)o+=i,r+=a;var s=Math.ceil(o),u=Math.ceil(r);this.numParticles=s*u,this.FBO=new A.a({tWidth:s,tHeight:u,renderer:t.get(),uniforms:{tWidth:{type:"f",value:s},tHeight:{type:"f",value:u},mouse:{value:new h.Vector3(1e4,1e4,1e4)},tParams:{type:"t",value:0},mouseRadius:{type:"f",value:this.mouseRadius},mousePush:{type:"f",value:this.mousePush},yThreshold:{type:"f",value:this.yThreshold}},simulationVertexShader:"\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t  vUv = vec2(uv);\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n",simulationFragmentShader:"\n\t/** generates a random number between 0 and 1 **/\n\thighp float rand(vec2 co)\n\t{\n\t\thighp float a = 12.9898;\n\t\thighp float b = 78.233;\n\t\thighp float c = 43758.5453;\n\t\thighp float dt= dot(co.xy ,vec2(a,b));\n\t\thighp float sn= mod(dt,3.14);\n\t\treturn fract(sin(sn) * c);\n\t}\n\n\tvarying vec2 vUv;\n\n\tuniform sampler2D tPrev;\n\tuniform sampler2D tCurr;\n\n\tuniform vec3 mouse;\n\tuniform sampler2D tParams;\n\tuniform float yThreshold;\n\tuniform float mouseRadius;\n\tuniform float mousePush;\n\n\tuniform float tWidth;\n\tuniform float tHeight;\n\n\tvec3 getPos(vec3 defaultPos) {\n\t\tvec3 deacceleration = vec3(1.1);\n\t\tvec3 prevPos = texture2D(tPrev, vUv).xyz;\n\t\tvec3 currPos = texture2D(tCurr, vUv).xyz;\n\t\tvec3 velocity = currPos == defaultPos ? vec3(0.0) : (currPos - prevPos) / deacceleration;\n\t\tvec3 pos = currPos;\n\t\tfloat distanceToMouse = length(pos - mouse);\n\n\t\tif (distanceToMouse < mouseRadius) {\n\t\t\tvelocity += (normalize(pos - mouse) * mousePush);\n\t\t}\n\n\t\tfloat xSpeed = texture2D(tParams, vUv).x;\n\t\tfloat ySpeed = texture2D(tParams, vUv).y;\n\t\tvelocity.y += ySpeed;\n\t\tvelocity.x += rand(vec2(defaultPos.x, defaultPos.y)) > 0.5 ? xSpeed : -xSpeed;\n\n\t\tif (pos == vec3(0.0) || pos.y > yThreshold + defaultPos.y) {\n\t\t\tpos = defaultPos;\n\t\t} else {\n\t\t\tpos += velocity;\n\t\t}\n\n\t\treturn pos;\n\t}\n\n\tfloat getSize(vec3 defaultPos, vec3 pos) {\n\t\tfloat defaultSize = texture2D(tParams, vUv).z;\n\t\tfloat incSize = texture2D(tParams, vUv).a;\n\t\tfloat currSize = texture2D(tCurr, vUv).a;\n\n\t\tcurrSize += currSize > defaultSize + (incSize * 60.0) ? 0.0 : incSize;\n\n\t\tif (pos.y == defaultPos.y) {\n\t\t\tcurrSize = defaultSize;\n\t\t}\n\n\t\treturn currSize;\n\t}\n\n\tvoid main() {\n\t\tvec3 defaultPos = vec3((vUv.x * 1.0) - 0.5, (vUv.y * 1.0) - 0.5, 0.0);\n\n\t\tvec3 pos = getPos(defaultPos);\n\t\tfloat size = getSize(defaultPos, pos);\n\n\t\t// write new position out\n\t\tgl_FragColor = vec4(pos, size);\n\t}\n"}),this.updateParticleParams();var l=this.videoImage=document.createElement("canvas");this.videoImageContext=l.getContext("2d");var c=this.videoTexture=new h.Texture(l);c.minFilter=c.magFilter=h.NearestFilter,c.needsUpdate=!0;for(var d=this.material=new h.ShaderMaterial({blending:h.NormalBlending,uniforms:Object.assign({},this.uniforms,{isCircle:{type:"b",value:this.particleShape===P.CIRCLE},tVideo:{type:"t",value:c},tParams:{type:"t",value:this.FBO.targets[0]}}),fragmentShader:"\n\tuniform sampler2D tVideo;\n\tuniform bool isCircle;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvec3 colors = texture2D(tVideo, vUv).rgb;\n\n\t\tgl_FragColor = vec4(colors, 1.0);\n\n\t\tif (isCircle) {\n\t\t\tif (length(gl_PointCoord - vec2(0.5, 0.5)) > 0.475) discard; // makes particles a circle\n\t\t}\n\t}\n",vertexShader:"\n\tuniform sampler2D tParams;\n\tuniform float sizeMultipler;\n\n\tvarying vec2 vUv;\n\n\tvoid main() {\n\t\tvUv = position.xy;\n\n\t\tvec3 pos = texture2D(tParams, vUv).xyz;\n\t\tfloat size = texture2D(tParams, vUv).a;\n\n\t\tvec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n\t\tgl_PointSize = size * (sizeMultipler / -mvPosition.z);\n\t\tgl_Position = projectionMatrix * mvPosition;\n\t}\n",opacity:1,vertexColors:!0,transparent:!0}),m=this.geometry=new h.Geometry,v=0;v<this.numParticles;v++){var f=new h.Vector3;f.x=v%s/s,f.y=Math.floor(v/s)/u,f.z=1e3*v,m.vertices.push(f)}this.particles=new h.Points(m,d),this.particles.frustumCulled=!1,this.scene.add(this.get()),this.ready=!0,document.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1)}},{key:"updateParticleParams",value:function(){for(var e=new Float32Array(4*this.numParticles),t=0,n=0;t<this.numParticles;t++,n+=4){var i=this.getSpeeds();e[n]=i.x,e[n+1]=i.y,e[n+2]=this.getSize(),e[n+3]=this.getSizeInc()}this.FBO.setTextureUniform("tParams",e)}},{key:"getSpeeds",value:function(){return{x:this.xSpeed*Math.random(),y:this.ySpeed*(Math.random()/2+.5)}}},{key:"getSize",value:function(){return this.particleSize*Math.random()/2}},{key:"getSizeInc",value:function(){return this.particleSizeInc*Math.random()*2}},{key:"update",value:function(){if(this.ready){var e=this.video,t=this.videoImageContext,n=this.videoImage,i=n.width,a=n.height,o=this.videoTexture;e.readyState===e.HAVE_ENOUGH_DATA&&(t.drawImage(e,0,0,i,a),o.needsUpdate=!0),this.FBO.simulate(),this.material.uniforms.tParams.value=this.FBO.getCurrentFrame()}}},{key:"get",value:function(){return this.particles}}]),e}(),C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.particles;t.scene;Object(s.a)(this,e),this.gui=new y.a,this.addShapeControls(n),this.addMouseRadiusControls(n),this.addMousePushControls(n),this.addYThresholdControls(n),this.addSpeedControls(n),this.addSizeControls(n),this.addSizeIncControls(n)}return Object(u.a)(e,[{key:"addShapeControls",value:function(e){this.gui.add(e,"particleShape",P).onFinishChange((function(){e.updateParticleVars()}))}},{key:"addYThresholdControls",value:function(e){this.gui.add(e,"yThreshold").min(0).max(1).step(.005).onFinishChange((function(){e.updateParticleVars()}))}},{key:"addMouseRadiusControls",value:function(e){this.gui.add(e,"mouseRadius").min(0).max(.5).step(.005).onFinishChange((function(){e.updateParticleVars()}))}},{key:"addMousePushControls",value:function(e){this.gui.add(e,"mousePush").min(0).max(.001).step(5e-6).onFinishChange((function(){e.updateParticleVars()}))}},{key:"addSpeedControls",value:function(e){this.gui.add(e,"xSpeed").min(0).max(5e-4).step(1e-6).onFinishChange((function(){e.updateParticleParams()})),this.gui.add(e,"ySpeed").min(0).max(5e-4).step(1e-6).onFinishChange((function(){e.updateParticleParams()}))}},{key:"addSizeControls",value:function(e){this.gui.add(e,"particleSize").min(0).max(.5).step(.005).onFinishChange((function(){e.updateParticleParams()}))}},{key:"addSizeIncControls",value:function(e){this.gui.add(e,"particleSizeInc").min(0).max(5e-4).step(2e-5).onFinishChange((function(){e.updateParticleParams()}))}}]),e}(),x=function(){function e(t){var n=t.alpha,i=void 0===n||n,a=t.pixelRatio,o=void 0===a?window.devicePixelRatio:a,r=t.width,u=void 0===r?window.width:r,l=t.height,c=void 0===l?window.height:l,d=t.container;Object(s.a)(this,e),this.renderer=new h.WebGLRenderer({alpha:i});var m=this.renderer.context;m.enable(m.BLEND),m.blendFunc(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA),this.setPixelRatio(o),this.setSize(u,c),d.appendChild(this.getDomElement()),window.addEventListener("resize",this.onWindowResize.bind(this))}return Object(u.a)(e,[{key:"getDomElement",value:function(e){return this.renderer.domElement}},{key:"onWindowResize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.renderer.setSize(e,t)}},{key:"setPixelRatio",value:function(e){this.renderer.setPixelRatio(e)}},{key:"setSize",value:function(e,t){this.renderer.setSize(e,t)}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scene,n=e.camera,i=e.renderTarget,a=void 0===i?null:i,o=e.force,r=void 0!==o&&o;this.renderer.render(t,n,a,r)}},{key:"get",value:function(){return this.renderer}}]),e}(),E=n(14),k=n.n(E),z=function(){function e(){Object(s.a)(this,e),this.stats=new k.a}return Object(u.a)(e,[{key:"getDomElement",value:function(e){return this.stats.domElement}},{key:"update",value:function(){this.stats.update()}}]),e}(),b=function(){function e(){Object(s.a)(this,e),this.scene=new h.Scene,this.scene.background=new h.Color(1118481)}return Object(u.a)(e,[{key:"add",value:function(e){this.scene.add(e)}},{key:"remove",value:function(e){this.scene.remove(e)}},{key:"get",value:function(){return this.scene}}]),e}(),M=function(e,t){t||(t=window.location.href),e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},N=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Number(M("quality"));if(e&&!isNaN(e))if(p.a&&window.matchMedia("(min-width: 480px)").matches){!function(){var e=document.querySelector(".info-content"),t=document.querySelector(".hide-info-button"),n=Number(M("quality"));document.getElementById("info").style.display="inline",document.querySelector(".num-particles").innerHTML=n.toLocaleString(),t.addEventListener("click",(function(){"Close"===t.innerHTML?(t.innerHTML="Open Info",e.style.display="none"):(t.innerHTML="Close",e.style.display="block")}))}();var t=window.innerWidth,n=window.innerHeight,i=document.getElementById("simulation"),a=new x({width:t,height:n,container:i}),o=new b,r=new g({aspectRatio:1,position:{x:1,y:0,z:-1}}),s=new z,u=new S({numParticles:e,scene:o,renderer:a}),l=function(){r.update(),s.update(),u.update(),a.render({scene:o.get(),camera:r.get()})};new C({particles:u}),i.appendChild(s.getDomElement()),function e(){requestAnimationFrame(e),l()}()}else document.getElementById("no-support").style.display="block";else document.getElementById("select-quality").style.display="block"}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{id:"container"},a.a.createElement("div",{id:"simulation"}),a.a.createElement("div",{id:"select-quality"},a.a.createElement("h4",null,"Select Quality"),a.a.createElement("a",{className:"quality-selector",href:"?quality=35000"},"Very Low"),a.a.createElement("a",{className:"quality-selector",href:"?quality=60000"},"Low"),a.a.createElement("a",{className:"quality-selector",href:"?quality=80000"},"Medium"),a.a.createElement("a",{className:"quality-selector",href:"?quality=120000"},"High"),a.a.createElement("a",{className:"quality-selector",href:"?quality=170000"},"Very High")),a.a.createElement("div",{id:"no-support"},a.a.createElement("h4",null,"Your device or browser is not supported. Please use the latest version of Chrome on desktop.")),a.a.createElement("div",{id:"info"},a.a.createElement("a",{className:"hide-info-button"},"Close"),a.a.createElement("div",{className:"info-content"},"Number of particles: ",a.a.createElement("span",{className:"num-particles"},"0"),a.a.createElement("br",null),"By ",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.tuqire.com"},"Tuqire Hussain"),"[",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/tuqire/webcam-particles"},"View Code"),"]",a.a.createElement("br",null),"Select Quality:",a.a.createElement("a",{href:"?quality=35000"},"V Low")," |",a.a.createElement("a",{href:"?quality=60000"},"Low")," |",a.a.createElement("a",{href:"?quality=80000"},"Medium")," |",a.a.createElement("a",{href:"?quality=120000"},"High")," |",a.a.createElement("a",{href:"?quality=170000"},"V High")))))}}]),t}(i.Component);n(24),i.Component;var R=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"App-container"},a.a.createElement(N,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.37edbafd.chunk.js.map